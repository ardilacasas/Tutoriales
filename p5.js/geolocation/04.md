# 4. Visualizar distancias

En este ejemplo se va a mostrar la distancia entre dos puntos del mapa. Se utilizará el ejemplo anterior como punto de partida.

### a. Crear puntos de destino y localización

* Crear variables de destino, localización y distancia entre ambos

```javascript
var destino; //variable para guardar el destino
var localizacion; //variable para guardar la localizacion actual
var distancia; //variable para guardar distancia
```

En este caso localización y destino son instancias de la clase punto: 

{% code-tabs %}
{% code-tabs-item title="punto.js" %}
```javascript
function punto(x, y, lat, lng) {
  this.x = x;
  this.y = y;
  this.lat = lat;
  this.lng = lng;

  this.dibujar = function(l) {
    ellipse(this.x, this.y, l, l);
  }

  this.mover = function(x, y, lat, lng) {
    this.x = x;
    this.y = y;
    this.lat = lat;
    this.lng = lng;
  }

  //esta función recibe como parametro un objeto punto
  this.calcDist = function(p) {
    
    //dibuja una linea entre los dos puntos
    line(this.x, this.y, p.x, p.y);
  }
}
```
{% endcode-tabs-item %}
{% endcode-tabs %}

Cada **punto** tiene unas **coordenadas** así como una **posición** \(x, y\) en la pantalla. Tiene funciones para **dibujarse**, **cambiar su posición** y **calcular su distancia** con respecto a otro punto

* Inicializar puntos en el **setup\(\)**

```javascript
  //inicializa los puntos de localización fuera del canvas
  destino = new punto(-100, -100, -100, -100);
  localizacion = new punto(-100, -100, -100, -100);
```

### b. Seleccionar destino

* Seleccionar un destino cuando se haga clic en la pantalla

```javascript
function mouseClicked() {
  destinoSelec = true;

  //convierte a pixeles la latitud y longitud del destino
  var position = myMap.pixelToLatLng(mouseX, mouseY);

  //mueve el punto a la nueva posicion
  destino.mover(mouseX, mouseY, position.lat, position.lng);

  //llama a la funcion dibujar puntos
  drawPoints();

}
```

* **destino.mover** actualiza la posición del destino con la **posición del mouse**

### c. Pintar destino

* Convertir las coordenadas del destino a **pixeles**

```javascript
//convierte a pixeles la latitud y longitud del destino
var destinoPos = myMap.latLngToPixel(destino.lat, destino.lng);
```

* Llamar a la función **pintar**

```javascript
//dibuja el punto con un ramaño de 10px
destino.dibujar(10);
```

```javascript
//función pintar en punto.js:
this.dibujar = function(tam) {
    ellipse(this.x, this.y, tam, tam);
}
```

* **Actualizar** la posición del destino cada vez que se mueva el mapa

```javascript
//mueve el punto a la nueva posicion
destino.mover(destinoPos.x, destinoPos.y, destino.lat, destino.lng);
```

### d. Dibujar distancia



